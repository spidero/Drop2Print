from fastapi import Request

TRANSLATIONS = {
    "en": {
        "title": "Drop2Print",
        "nav_user": "User panel",
        "nav_admin": "Admin",
        "admin_login": "Admin login",
        "password": "Password",
        "login": "Log in",
        "login_error": "Invalid password",
        "system_info": "System info",
        "watch_path_label": "Watched folder",
        "printer_label": "Printer",
        "not_configured": "Not configured",
        "watch_disabled": "Watching disabled",
        "printer_default": "Default system printer",
        "drop_title": "Drop PDF files here",
        "drop_sub": "Files will be uploaded and sent to print automatically.",
        "drop_hint": "Drop PDF files here or click to choose.",
        "recent_jobs": "Recent jobs",
        "uploading": "Uploading {filename}...",
        "status": "Job #{id} ({filename}) status: {status}",
        "jobs_empty": "No jobs.",
        "loading": "Loading...",
        "settings": "Settings",
        "copies_label": "Number of copies per job",
        "save": "Save",
        "save_success": "Saved.",
        "save_error": "Save error",
        "stats": "Statistics",
        "total_jobs": "Total jobs",
        "printed": "Printed",
    },
    "pl": {
        "title": "Drop2Print",
        "nav_user": "Panel użytkownika",
        "nav_admin": "Administracja",
        "admin_login": "Logowanie administratora",
        "password": "Hasło",
        "login": "Zaloguj",
        "login_error": "Nieprawidłowe hasło",
        "system_info": "Informacje systemowe",
        "watch_path_label": "Folder Samby",
        "printer_label": "Drukarka",
        "not_configured": "Brak konfiguracji",
        "watch_disabled": "Nasłuch wyłączony",
        "printer_default": "Domyślna drukarka systemowa",
        "drop_title": "Przeciągnij pliki PDF",
        "drop_sub": "Pliki zostaną automatycznie wysłane do druku.",
        "drop_hint": "Upuść pliki PDF tutaj lub kliknij, aby wybrać.",
        "recent_jobs": "Ostatnie zadania",
        "uploading": "Wysyłanie {filename}...",
        "status": "Zadanie #{id} ({filename}) status: {status}",
        "jobs_empty": "Brak zadań.",
        "loading": "Ładowanie...",
        "settings": "Ustawienia",
        "copies_label": "Liczba kopii na zadanie",
        "save": "Zapisz",
        "save_success": "Zapisano.",
        "save_error": "Błąd zapisu",
        "stats": "Statystyki",
        "total_jobs": "Zadań łącznie",
        "printed": "Wydrukowane",
    },
}


def get_lang(request: Request) -> str:
    lang = request.query_params.get("lang") or request.cookies.get("lang") or "en"
    return lang if lang in TRANSLATIONS else "en"
